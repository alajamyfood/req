<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/>
<title>نموذج طلب منتجات العجمي</title>

<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">

<meta property="og:title" content="نموذج طلب منتجات العجمي">
<meta property="og:description" content="اطلب منتجات العجمي الأصلية بسهولة">
<meta property="og:image" content="logo.png">

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* نفس التنسيق تبعك بدون تغيير جوهري */
body{font-family:'Tajawal',sans-serif;background:linear-gradient(to bottom,#006d77,#e0f7f4);padding:10px}
.container{background:#fff;border-radius:18px;padding:24px;max-width:720px;margin:auto;box-shadow:0 10px 35px rgba(0,109,119,.25)}
.logo-img{max-width:320px;width:100%;display:block;margin:auto}
table{width:100%;border-collapse:collapse;margin:12px 0}
th,td{padding:12px;border-bottom:1px solid #eee;text-align:right}
.add-btn,button[type=submit]{width:100%;padding:14px;border:none;border-radius:10px;color:#fff;font-weight:700;cursor:pointer}
.add-btn{background:#119da4;margin-top:10px}
button[type=submit]{background:linear-gradient(90deg,#119da4,#83c5be);margin-top:20px}
.remove-btn{background:#e74c3c;color:#fff;border:none;padding:6px 10px;border-radius:6px}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <img src="logo.png" class="logo-img">
  </div>

  <h2>نموذج طلب منتجات</h2>

  <form id="orderForm">
    <input name="governorate" placeholder="المحافظة / المدينة" required><br><br>
    <input name="customerName" placeholder="اسم الزبون" required><br><br>

    <table>
      <thead>
        <tr><th>المنتج</th><th>الكمية</th><th>الوزن</th><th></th></tr>
      </thead>
      <tbody id="itemsBody"></tbody>
    </table>

    <button type="button" class="add-btn" onclick="addRow()">+ إضافة صنف</button>
    <textarea name="notes" placeholder="ملاحظات"></textarea>
    <button type="submit" id="submitBtn">إرسال الطلب</button>
  </form>
</div>

<datalist id="product-list">
  <option value="001 عجمي حمص بالطحينة 325غ">
  <option value="002 عجمي كريم الثوم 230غ">
  <option value="003 عجمي متبل 230غ">
  <option value="004 عجمي حمص 450غ">
  <option value="005 عجمي حمص 300غ">
  <option value="006 عجمي حمص 225غ">
  <option value="007 عجمي كريم الثوم 225غ">
  <option value="008 عجمي متبل 450غ">
  <option value="009 عجمي متبل 225غ">
  <option value="010 زاد العربي حمص بالطحينة 230غ">
  <option value="011 زاد العربي كريم الثوم 230غ">
  <option value="012 زاد العربي متبل 230غ">
  <option value="013 الحمصاني حمص 230غ">
  <option value="014 الحمصاني كريم الثوم 230غ">
  <option value="015 الخال حمص 230غ">
  <option value="016 الخال كريم الثوم 230غ">
  <option value="017 الخال متبل 230غ">
  <option value="018 عجمي حمص بالكيلو">
  <option value="019 الحمصاني حمص بالكيلو">
  <option value="020 زاد العربي كريم الثوم بالكيلو">
  <option value="021 الحمصاني كريم الثوم بالكيلو">
  <option value="022 الخال كريم الثوم بالكيلو">
  <option value="023 MNZ كريم الثوم بالكيلو">
  <option value="024 عجمي متبل بالكيلو">
  <option value="025 حمص خام أسبتيك 20 كغ">
  <option value="026 2750غ عجمي لبنة">
  <option value="027 900غ عجمي لبنة">
  <option value="028 أبو عبدو حمص 300غ">
</datalist>

<script>
const productWeights = { "001 عجمي حمص بالطحينة 325غ":"325 غرام","002 عجمي كريم الثوم 230غ":"230 غرام","003 عجمي متبل 230غ":"230 غرام","004 عجمي حمص 450غ":"450 غرام","005 عجمي حمص 300غ":"300 غرام","006 عجمي حمص 225غ":"225 غرام","007 عجمي كريم الثوم 225غ":"225 غرام","008 عجمي متبل 450غ":"450 غرام","009 عجمي متبل 225غ":"225 غرام","010 زاد العربي حمص بالطحينة 230غ":"230 غرام","011 زاد العربي كريم الثوم 230غ":"230 غرام","012 زاد العربي متبل 230غ":"230 غرام","013 الحمصاني حمص 230غ":"230 غرام","014 الحمصاني كريم الثوم 230غ":"230 غرام","015 الخال حمص 230غ":"230 غرام","016 الخال كريم الثوم 230غ":"230 غرام","017 الخال متبل 230غ":"230 غرام","018 عجمي حمص بالكيلو":"كيلو غرام","019 الحمصاني حمص بالكيلو":"كيلو غرام","020 زاد العربي كريم الثوم بالكيلو":"كيلو غرام","021 الحمصاني كريم الثوم بالكيلو":"كيلو غرام","022 الخال كريم الثوم بالكيلو":"كيلو غرام","023 MNZ كريم الثوم بالكيلو":"كيلو غرام","024 عجمي متبل بالكيلو":"كيلو غرام","025 حمص خام أسبتيك 20 كغ":"20 كغ","026 2750غ عجمي لبنة":"2750 غرام","027 900غ عجمي لبنة":"900 غرام","028 أبو عبدو حمص 300غ":"300 غرام" };

let rowCounter = 0;

function addRow(){
  const index = rowCounter++;
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td><input list="product-list" name="product[${index}]" required></td>
    <td><input type="number" name="quantity[${index}]" min="1" required></td>
    <td>
      <select name="weight[${index}]">
        <option value="" disabled selected hidden>اختر الوزن</option>
        <option>325 غرام</option><option>230 غرام</option><option>450 غرام</option>
        <option>300 غرام</option><option>225 غرام</option><option>كيلو غرام</option>
        <option>2750 غرام</option><option>900 غرام</option>
      </select>
    </td>
    <td><button type="button" class="remove-btn" onclick="this.closest('tr').remove()">حذف</button></td>`;
  itemsBody.appendChild(tr);

  tr.querySelector(`[name="product[${index}]"]`).addEventListener('input', e=>{
    const w=productWeights[e.target.value.trim()];
    if(w) tr.querySelector(`[name="weight[${index}]"]`).value=w;
  });
}

addRow();

orderForm.addEventListener('submit',function(e){
  e.preventDefault();
  const btn=submitBtn;
  btn.disabled=true; btn.textContent='جاري الإرسال...';

  fetch('https://script.google.com/macros/s/AKfycbzZhYFeTwTnh9VtoxmTWlSXeQKLvskfKxjBfvmf8_p9H6NIO2_uGurZ8FKF5npKVqeYvA/exec',{
    method:'POST',
    body:new FormData(this)
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.status==='success'){
      alert('تم الإرسال ✅ عدد الأصناف: '+d.itemsCount);
      orderForm.reset(); itemsBody.innerHTML=''; rowCounter=0; addRow();
    } else alert('خطأ: '+d.message);
  })
  .catch(err=>alert('مشكلة اتصال: '+err.message))
  .finally(()=>{btn.disabled=false; btn.textContent='إرسال الطلب';});
});
</script>
</body>
</html>
