<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>طلب منتجات العجمي</title>

<meta name="description" content="نموذج طلب منتجات العجمي: حمص، متبل، كريم الثوم، لبنة وغيرها مع توصيل سريع داخل تركيا">

<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">

<meta property="og:title" content="طلب منتجات العجمي">
<meta property="og:description" content="اطلب منتجات العجمي الأصلية بسهولة وسرعة">
<meta property="og:image" content="/alajamy_logo.png">
<meta property="og:url" content="https://alajamyfood.github.io">
<meta property="og:type" content="website">

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
 --turquoise-dark:#006d77;
 --turquoise-medium:#119da4;
 --turquoise-light:#83c5be;
 --turquoise-pale:#e0f7f4;
 --text-dark:#0d1f1f;
 --border:#a0d4cf;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{
 font-family:'Tajawal',system-ui;
 background:linear-gradient(to bottom,var(--turquoise-dark),var(--turquoise-pale));
 color:var(--text-dark);
 padding:10px 8px;
 min-height:100vh;
}
.container{
 background:rgba(255,255,255,.92);
 border-radius:20px;
 padding:20px 16px;
 max-width:640px;
 margin:auto;
 box-shadow:0 10px 35px rgba(0,109,119,.28);
}
@supports (backdrop-filter: blur(12px)){
 .container{backdrop-filter:blur(12px);}
}
.logo-img{max-width:260px;display:block;margin:auto 0 10px;}
h2{text-align:center;color:var(--turquoise-dark);margin-bottom:20px;}
.form-group{margin-bottom:20px;}
label{display:block;margin-bottom:6px;font-weight:600;}
input,select,textarea{
 width:100%;padding:12px;border:1px solid var(--border);
 border-radius:10px;font-size:1rem;
}
table{width:100%;border-collapse:collapse;margin:10px 0 16px;}
th,td{padding:10px 6px;text-align:right;border-bottom:1px solid #e0f0ef;}
th{background:rgba(17,157,164,.08);}
.add-btn,.remove-btn,button[type="submit"]{
 border:none;color:white;cursor:pointer;
}
.add-btn{background:var(--turquoise-medium);padding:12px;border-radius:8px;width:100%;}
.remove-btn{background:#e74c3c;padding:6px 10px;border-radius:6px;}
button[type="submit"]{
 width:100%;padding:14px;
 background:linear-gradient(90deg,var(--turquoise-medium),var(--turquoise-light));
 border-radius:12px;font-size:1.2rem;font-weight:700;
}
</style>
</head>
<body>

<div class="container">
<img src="/alajamy_logo.png" class="logo-img">
<h2>طلب منتجات</h2>

<form id="orderForm">
<input type="text" name="company" style="display:none">

<div class="form-group">
<label>المحافظة / المدينة *</label>
<input type="text" name="governorate" required>
</div>

<div class="form-group">
<label>اسم العميل *</label>
<input type="text" name="customerName" required>
</div>

<div class="form-group">
<label>الأصناف المطلوبة</label>
<table>
<thead>
<tr><th>المنتج</th><th>الكمية</th><th>الوزن</th><th></th></tr>
</thead>
<tbody id="itemsBody"></tbody>
</table>
<button type="button" class="add-btn" onclick="addRow()">+ إضافة صنف</button>
</div>

<div class="form-group">
<label>ملاحظات</label>
<textarea name="notes"></textarea>
</div>

<button type="submit" id="submitBtn">إرسال الطلب</button>
</form>
</div>

<datalist id="product-list">
<option value="001 عجمي حمص بالطحينة 325غ">
<option value="002 عجمي كريم الثوم 230غ">
<option value="003 عجمي متبل 230غ">
</datalist>

<script>
const productWeights={
"001 عجمي حمص بالطحينة 325غ":"325 غرام",
"002 عجمي كريم الثوم 230غ":"230 غرام",
"003 عجمي متبل 230غ":"230 غرام"
};

let rowCounter=0;

function addRow(){
 const tbody=document.getElementById('itemsBody');
 const tr=document.createElement('tr');
 const pid=`p${rowCounter}`, wid=`w${rowCounter}`;

 tr.innerHTML=`
 <td><input id="${pid}" list="product-list" name="product_${rowCounter}" required></td>
 <td><input type="number" name="quantity_${rowCounter}" min="1" required></td>
 <td>
   <select id="${wid}" name="weight_${rowCounter}">
     <option value=""></option>
     <option>325 غرام</option><option>230 غرام</option><option>450 غرام</option>
     <option>300 غرام</option><option>225 غرام</option>
     <option>كيلو غرام</option><option>2750 غرام</option><option>900 غرام</option>
   </select>
 </td>
 <td><button type="button" class="remove-btn" onclick="this.closest('tr').remove()">حذف</button></td>`;
 tbody.appendChild(tr);

 document.getElementById(pid).addEventListener('input',function(){
  const val=this.value.trim();
  const ws=document.getElementById(wid);
  if(productWeights[val]) ws.value=productWeights[val];
 });

 rowCounter++;
}
addRow();

document.getElementById('orderForm').addEventListener('submit',function(e){
 e.preventDefault();
 const formData=new FormData(this);
 if(formData.get('company')) return;

 const btn=document.getElementById('submitBtn');
 btn.disabled=true; btn.textContent='جاري الإرسال...';

 fetch('https://script.google.com/macros/s/AKfycbzZhYFeTwTnh9VtoxmTWlSXeQKLvskfKxjBfvmf8_p9H6NIO2_uGurZ8FKF5npKVqeYvA/exec',{method:'POST',body:formData})
 .then(r=>r.json())
 .then(d=>{
   const count=document.querySelectorAll('#itemsBody tr').length;
   alert('تم الإرسال بنجاح\nعدد الأصناف: '+count);
   this.reset(); document.getElementById('itemsBody').innerHTML=''; rowCounter=0; addRow();
   window.scrollTo({top:0,behavior:'smooth'});
 })
 .catch(()=>alert('حصل خطأ بالاتصال'))
 .finally(()=>{btn.disabled=false;btn.textContent='إرسال الطلب';});
});
</script>

</body>
</html>
